@api.route('/support-tickets', methods=['GET'])
@jwt_required()
def get_support_tickets():
    user_id = get_jwt_identity()
    tickets = SupportTicket.query.filter_by(customer_id=user_id).all()
    return jsonify([ticket.serialize() for ticket in tickets]), 200

@api.route('/support-tickets', methods=['POST'])
@jwt_required()
def create_support_ticket():
    user_id = get_jwt_identity()
    data = request.json
    new_ticket = SupportTicket(customer_id=user_id, **data)
    db.session.add(new_ticket)
    db.session.commit()
    return jsonify(new_ticket.serialize()), 201