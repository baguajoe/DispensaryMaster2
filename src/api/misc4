.route('/payment-methods', methods=['GET'])
@jwt_required()
def get_payment_methods():
    user_id = get_jwt_identity()
    payment_methods = PaymentMethod.query.filter_by(customer_id=user_id).all()
    return jsonify([method.serialize() for method in payment_methods]), 200

@api.route('/payment-methods', methods=['POST'])
@jwt_required()
def add_payment_method():
    user_id = get_jwt_identity()
    data = request.json
    new_method = PaymentMethod(customer_id=user_id, **data)
    db.session.add(new_method)
    db.session.commit()
    return jsonify(new_method.serialize()), 201

@api.route('/payment-methods/<int:method_id>', methods=['DELETE'])
@jwt_required()
def delete_payment_method(method_id):
    method = PaymentMethod.query.get_or_404(method_id)
    db.session.delete(method)
    db.session.commit()
    return jsonify({"message": "Payment method deleted"}), 200